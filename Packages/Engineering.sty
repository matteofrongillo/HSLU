\ProvidesPackage{Engineering}[2025/02/17 LaTeX functions]

% ============= PACKAGES =============

\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{url}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{babel}
\usepackage{enumitem}
\usepackage{parskip}
\usepackage{chemfig}
\usepackage{pdfpages}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{circuitikz}
\usepackage{fancybox}
\usepackage{makecell}
\usepackage{pgfplots}
\usepackage{soul}
\usepackage{ulem}
\usepackage{wrapfig}
\usepackage{subcaption}
\usepackage[T1]{fontenc}
\usepackage{esvect}
\usepackage{siunitx}
\usepackage{mathtools}
\usepackage{varwidth}
\usetikzlibrary{arrows.meta,decorations.pathreplacing,angles,quotes,calc,positioning}
\pgfplotsset{compat=1.17}
\definecolor{darkgreen}{rgb}{0.0, 0.6, 0.0}
\usepackage{pdflscape}
\usepackage{forest}
\usepackage[version=3]{acro}
\usepackage{tabularx}
\usepackage[intoc]{nomencl}
\usepackage{etoolbox}

% ============= GEOMETRY =============

\geometry{
    a4paper,
    total={170mm, 257mm},
    left=20mm,
    top=20mm
}

% ============= RENEW COMMANDS =============

% Title redefined
\makeatletter
\renewcommand{\author}[1]{%
  \def\@author{%
    #1\\\\
    \parbox{\textwidth}{%
      \noindent
      \begin{minipage}[t]{0.15\textwidth}
        Last update:
      \end{minipage}%
      \begin{minipage}[t]{0.70\textwidth}
        \centering
        \today
      \end{minipage}%
      \begin{minipage}[t]{0.15\textwidth}
      \end{minipage}%
    }
  }%
}
\makeatother


% Empty set redefined
\let\emptyset\varnothing

% Arctan redefined
\makeatletter
\pgfmathdeclarefunction{arctan}{1}{%
    \begingroup
    \pgfmathparse{rad(atan(#1))}%
    \endgroup
}
\makeatother

% ============= NEW COMMANDS =============

\newcommand{\figbox}[1]{ 
    \begin{figure*}[ht!]        
        \begin{center}            
            \fbox{\begin{varwidth}{\textwidth} #1 \end{varwidth}}        
        \end{center}    
    \end{figure*}
}

\newcommand{\efigbox}[1]{ 
    \begin{figure*}[ht!]        
        \begin{center}            
            \fbox{\begin{varwidth}{\textwidth} $\dm #1$ \end{varwidth}}        
        \end{center}    
    \end{figure*}
}

\newcommand{\wrapfill}{
    \par
    \ifnum \value{WF@wrappedlines} > 0
        \addtocounter{WF@wrappedlines}{-1}%
        \null\vspace{
            \arabic{WF@wrappedlines}
            \baselineskip
        }
        \WFclear
    \fi
    \phantom{}
}

\ExplSyntaxOn
\DeclareDocumentCommand{\integral}{d[] d[] d[] d[]}
{
    \IfNoValueTF { #4 }
    {
        \IfNoValueTF { #3 }
        { \displaystyle \int #1\,d#2 }
        { \text{Either\,\,2\,\,or\,\,4\,\,arguments\,\,must\,\,be\,\,passed} }
    }
    {
        \displaystyle \int\limits\c_math_subscript_token{#1}^{#2} #3 \,d#4
        % In Expl Syntax characters as '_' or ':' are used as letters in command names
        % hence the \c_math_subscript_token{#1} rather than _{#1}
    }
}
\ExplSyntaxOff

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=2pt] (char) {#1};}}

\makeatletter
\newcommand*{\rom}[1]{\expandafter\@slowromancap\romannumeral #1@}
\makeatother

\newcommand{\pdftitle}[1]{\hypersetup{
  colorlinks=true,
  linkcolor=black,
  urlcolor=blue,
  pdftitle={#1}
}}

\newcommand{\difference}{\,\backslash\,}
\newcommand{\rem}{\underline{Remark}: }
\newcommand{\nots}{\underline{Notation}: }
\newcommand{\note}{\underline{Note}: }
\newcommand{\prf}{\underline{Proof}: }
\newcommand{\exs}{\underline{Example}: }
\newcommand{\defs}{\underline{Definition}: }
\newcommand{\wrn}{\underline{Warning}: }
\newcommand{\sht}{\ |\ }
\newcommand{\pph}[1]{\paragraph{#1} \phantom{}\\}
\newcommand{\dm}{\displaystyle}
\newcommand{\rad}{^{\mathrm{c}}}
\newcommand{\dsum}[2]{\displaystyle \sum_{#1}^{#2}}
\newcommand{\dx}[2]{\dfrac{{\mathrm{d}}^{#1}{#2}}{\mathrm{d}x^{#1}}}

\newlength{\phasewidth}
\newcommand{\phase}[1]{%
    \mathrel{%
        \settowidth{\phasewidth}{$#1$}%
        \begin{tikzpicture}[baseline=(M.base),inner sep=0pt]
            \coordinate (O) at (-0.7em,0);
            \coordinate (A) at ($(O)+(\phasewidth+0.7em,0)$);
            \coordinate (B) at ($(O)+(0.35em,0.5em)$); 
            \draw (O) -- (A);
            \draw (O) -- (B);
            \node (M) at ($ (O)!0.57!(A) $)[above, yshift=.5pt]{$#1$};
        \end{tikzpicture}%
    }%
}
